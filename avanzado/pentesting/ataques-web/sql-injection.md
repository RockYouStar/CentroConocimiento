# SQL Injection

<figure><img src="../../../.gitbook/assets/image (3) (1).png" alt=""><figcaption></figcaption></figure>

La inyección SQL (SQLi) es una vulnerabilidad de seguridad en la web que permite a un atacante manipular las consultas que una aplicación hace a su base de datos.&#x20;

Generalmente, permite a un atacante ver datos que normalmente no puede obtener. Esto puede incluir datos pertenecientes a otros usuarios, o cualquier otro dato al que la propia aplicación pueda acceder.&#x20;

En muchos casos, un atacante puede modificar o borrar estos datos, causando cambios persistentes en el contenido o comportamiento de la aplicación.

## ¿Cuál es el impacto de un ataque de inyección SQL exitoso?

Un ataque de inyección SQL exitoso, puede dar lugar a un acceso no autorizado a datos sensibles como:&#x20;

* contraseñas
* datos de tarjetas de crédito
* información personal de los usuarios

En los últimos años, muchas filtraciones de datos de gran repercusión han sido el resultado de ataques de inyección SQL, lo que ha provocado daños a la reputación y multas reglamentarias.&#x20;

En algunos casos, un atacante puede obtener una puerta trasera persistente en los sistemas de una organización, lo que conduce a un compromiso a largo plazo que puede pasar desapercibido durante un período prolongado.

## Ejemplo de SQLI

Imaginemos una aplicación de compras que muestra productos en diferentes categorías. Cuando el usuario hace clic en la categoría _Regalos_, su navegador solicita la URL:

```html
https://insecure-website.com/products?category=Gifts
```

Esto hace que la aplicación realice una consulta SQL para recuperar los detalles de los productos solicitados de la base de datos:

```sql
SELECT * FROM products WHERE category = 'Gifts' AND released = 1
```

Esta consulta SQL pide a la base de datos que devuelva

todos los detalles (\*) de la tabla de productos donde la categoría es Regalos y released es 1.&#x20;

La restricción released = 1 se utiliza para ocultar los productos que no están released.&#x20;

Entendemos que para los productos no released --> released = 0.

La aplicación no implementa ninguna protección contra ataques de inyección SQL, por lo que un atacante puede construir un ataque como:

```http
https://insecure-website.com/products?category=Gifts'--
```

Esto hace que se realice la siguiente consulta:

```sql
SELECT * FROM products WHERE category = 'Gifts'--'
```

La clave aquí es que la secuencia de doble guión (--) es un indicador de comentario en SQL. Esto significa que el resto de la consulta se interpreta como un comentario. Por tanto, elimina  el resto de la consulta, haciendo que ya no se incluya AND released = 1.&#x20;

Esto significa que se muestran todos los productos, incluidos los que no han sido liberados.

Estaríamos obteniendo información a la que no deberíamos poder acceder.
